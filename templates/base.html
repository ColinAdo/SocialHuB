{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="{% static 'img/apple-icon.png' %}"
    />
    <link rel="icon" type="image/png" href="{% static 'img/favicon.png' %}" />
    <title>SocialHuB</title>
    <!--     Fonts and icons     -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700"
      rel="stylesheet"
    />
    <!-- Nucleo Icons -->
    <link href="{% static 'css/nucleo-icons.css' %}" rel="stylesheet" />
    <link href="{% static 'css/nucleo-svg.css' %}" rel="stylesheet" />
    <!-- Font Awesome Icons -->
    <script
      src="https://kit.fontawesome.com/42d5adcbca.js"
      crossorigin="anonymous"
    ></script>
    <link href="{% static 'css/nucleo-svg.css' %}" rel="stylesheet" />
    <!-- CSS Files -->
    <link
      id="pagestyle"
      href="{% static 'css/argon-dashboard.css' %}"
      rel="stylesheet"
    />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
   <link id="pagestyle" href="{% static 'css/argon-dashboard.css' %}" rel="stylesheet" />
    
    <style>
      .bell-icon {
        position: relative;
      }

      .bell-icon small {
        position: absolute;
        top: -11px;
        right: 0;
      }

      .circle {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 12px;
  overflow: hidden;
}

.number {
  white-space: nowrap;
}

  .post-item {
    height: 300px; /* Adjust the height as needed */
    overflow: hidden;
  }

  .post-item img,
  .post-item video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  input[type="file"] {
  display: none;
}

label {
  cursor: pointer;
}
</style>
  </head>

<body class="g-sidenav-show">
    <!-- {% include 'nav.html' %} -->
    <div class="">
        {% if messages %}
            {% for message in messages %}
              <div class="alert alert-success text-center" role="alert">
                <small class="text-white">{{message}}</small>
              </div>
            {% endfor %}
        {% endif %} 
    </div>

    {% block content %}
        
    {% endblock content %}

    <footer class="footer py-5">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 mb-4 mx-auto text-center">
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-5 me-3 mb-sm-0 mb-2"
            >
              Company
            </a>
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-5 me-3 mb-sm-0 mb-2"
            >
              About Us
            </a>
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-5 me-3 mb-sm-0 mb-2"
            >
              Team
            </a>
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-5 me-3 mb-sm-0 mb-2"
            >
              Products
            </a>
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-5 me-3 mb-sm-0 mb-2"
            >
              Blog
            </a>
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-5 me-3 mb-sm-0 mb-2"
            >
              Pricing
            </a>
          </div>
          <div class="col-lg-8 mx-auto text-center mb-4 mt-2">
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-4 me-4"
            >
              <span class="text-lg fab fa-dribbble"></span>
            </a>
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-4 me-4"
            >
              <span class="text-lg fab fa-twitter"></span>
            </a>
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-4 me-4"
            >
              <span class="text-lg fab fa-instagram"></span>
            </a>
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-4 me-4"
            >
              <span class="text-lg fab fa-pinterest"></span>
            </a>
            <a
              href="javascript:;"
              target="_blank"
              class="text-dark me-xl-4 me-4"
            >
              <span class="text-lg fab fa-github"></span>
            </a>
          </div>
        </div>
        <div class="row">
          <div class="col-8 mx-auto text-center mt-1">
            <p class="mb-0 text-dark">
              Copyright Â©
              <script>
                document.write(new Date().getFullYear());
              </script>
              Created by Colin.
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!--   Core JS Files   -->
    <!-- icons scripts -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- End icon scripts -->
    <script src="{% static 'js/core/popper.min.js' %}"></script>
    <script src="{% static 'js/core/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/plugins/perfect-scrollbar.min.js' %}"></script>
    <script src="{% static 'js/plugins/smooth-scrollbar.min.js' %}"></script>
    <script src="{% static 'js/plugins/chartjs.min.js' %}"></script>
    <script>
      var ctx1 = document.getElementById("chart-line").getContext("2d");

      var gradientStroke1 = ctx1.createLinearGradient(0, 230, 0, 50);

      gradientStroke1.addColorStop(1, "rgba(94, 114, 228, 0.2)");
      gradientStroke1.addColorStop(0.2, "rgba(94, 114, 228, 0.0)");
      gradientStroke1.addColorStop(0, "rgba(94, 114, 228, 0)");
      new Chart(ctx1, {
        type: "line",
        data: {
          labels: [
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec",
          ],
          datasets: [
            {
              label: "Mobile apps",
              tension: 0.4,
              borderWidth: 0,
              pointRadius: 0,
              borderColor: "#5e72e4",
              backgroundColor: gradientStroke1,
              borderWidth: 3,
              fill: true,
              data: [50, 40, 300, 220, 500, 250, 400, 230, 500],
              maxBarThickness: 6,
            },
          ],
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false,
            },
          },
          interaction: {
            intersect: false,
            mode: "index",
          },
          scales: {
            y: {
              grid: {
                drawBorder: false,
                display: true,
                drawOnChartArea: true,
                drawTicks: false,
                borderDash: [5, 5],
              },
              ticks: {
                display: true,
                padding: 10,
                color: "#fbfbfb",
                font: {
                  size: 11,
                  family: "Open Sans",
                  style: "normal",
                  lineHeight: 2,
                },
              },
            },
            x: {
              grid: {
                drawBorder: false,
                display: false,
                drawOnChartArea: false,
                drawTicks: false,
                borderDash: [5, 5],
              },
              ticks: {
                display: true,
                color: "#ccc",
                padding: 20,
                font: {
                  size: 11,
                  family: "Open Sans",
                  style: "normal",
                  lineHeight: 2,
                },
              },
            },
          },
        },
      });
    </script>
    <script>
      var win = navigator.platform.indexOf("Win") > -1;
      if (win && document.querySelector("#sidenav-scrollbar")) {
        var options = {
          damping: "0.5",
        };
        Scrollbar.init(document.querySelector("#sidenav-scrollbar"), options);
      }

      var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
        var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
          return new bootstrap.Popover(popoverTriggerEl)
        });
    </script>
    <script>
      $(document).ready(function () {
          $('[data-bs-toggle="popover"]').popover();
        });
    </script>
    <!-- Script to handle like and unlike -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const likeButtons = document.querySelectorAll(".like-button");
        likeButtons.forEach(button => {
            button.addEventListener("click", handleLikeClick);
        });

        function handleLikeClick(event) {
            event.preventDefault();
            const postId = event.currentTarget.getAttribute("data-post-id");
            const icon = event.currentTarget.querySelector("ion-icon");

            fetch(`{% url 'likepost' %}?post_id=${postId}`)
                .then(response => response.json())
                .then(data => {
                    if (data.liked) {
                        icon.setAttribute("name", "heart");
                        addToLikedPosts(postId);
                    } else {
                        icon.setAttribute("name", "heart-outline");
                        removeFromLikedPosts(postId);
                    }
                })
                .catch(error => console.error("Error:", error));
        }

        function addToLikedPosts(postId) {
            let likedPosts = JSON.parse(localStorage.getItem("likedPosts")) || [];
            likedPosts.push(postId);
            localStorage.setItem("likedPosts", JSON.stringify(likedPosts));
        }

        function removeFromLikedPosts(postId) {
            let likedPosts = JSON.parse(localStorage.getItem("likedPosts")) || [];
            likedPosts = likedPosts.filter(id => id !== postId);
            localStorage.setItem("likedPosts", JSON.stringify(likedPosts));
        }
    });

</script>
<!-- End script to handle like and unlike  -->
<script>
    function hideNotificationCount() {
        const notificationCountElement = document.getElementById("notification-count");

        if (notificationCountElement) {
            notificationCountElement.style.display = "none";

            // Send AJAX request to update notification count on the server
            fetch("{% url 'update_notification_count' %}", {
                method: "POST",
                headers: {
                    "X-CSRFToken": "{{ csrf_token }}",
                },
            });
        }
    }
</script>
    <!-- Github buttons -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!-- Control Center for Soft Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="{% static 'js/argon-dashboard.min.js' %}"></script>
    
</body>
</html>